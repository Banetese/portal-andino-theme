{% extends "config/config_base.html" %}
{% block config %}
    <h1>Metadatos del portal</h1>

    <form method="post" action="" data-module="basic-form" accept-charset="utf-8" enctype="multipart/form-data">

        <h2>Homepage (recomendado)</h2>
        <p>Ingresá el dominio del sitio del portal.</p>
        {% set homepage = h.get_theme_config('portal-metadata.homepage') %}
        <input name="metadata-homepage" type="text" title="Homepage" placeholder="ej: www.tusitio.com" value="{{ homepage if homepage else '' }}">

        <h2>Identificador (recomendado)</h2>
        <p>El identificador debe contener una o más palabras en minúsculas, separadas con guiones medios, sin usar caracteres especiales.
            Identifica en forma breve, sucinta y declarativa al nodo.</p>
        {% set id = h.get_theme_config('portal-metadata.id') %}
        <input name="metadata-id" type="text" title="Identificador" placeholder="ej: desarrollo-social" value="{{ id if id else '' }}">

        <h2 name="launch_date_h2">Fecha de lanzamiento (recomendado)</h2>
        {% set launch_date = h.get_theme_config('portal-metadata.launch_date') %}
        <input name="metadata-launch_date" type="text" title="Fecha de lanzamiento" placeholder="DD/MM/AAAA"
               value="{{ launch_date if launch_date else '' }}">

        <h2>Idioma del portal (recomendado)</h2>
        {% set languages = [{"name":"Abkhaz","code":"abk"},{"name":"Afar","code":"aar"},{"name":"Africanos","code":"afr"},{"name":"Akan","code":"aka"},{"name":"Albania","code":"sqi"},{"name":"Amárico","code":"amh"},{"name":"Árabe","code":"ara"},{"name":"Aragonés","code":"arg"},{"name":"Armenio","code":"hye"},{"name":"Assamese","code":"asm"},{"name":"Avaric","code":"ava"},{"name":"Avestan","code":"ave"},{"name":"Aymara","code":"aym"},{"name":"Azerbaiyán","code":"aze"},{"name":"Bambara","code":"bam"},{"name":"Bashkir","code":"bak"},{"name":"Vasco","code":"eus"},{"name":"Belarús","code":"bel"},{"name":"Bengalí","code":"ben"},{"name":"Bihari","code":"bih"},{"name":"Bislama","code":"bis"},{"name":"Bosnia","code":"bos"},{"name":"Breton","code":"bre"},{"name":"Búlgaro","code":"bul"},{"name":"Burmese","code":"mya"},{"name":"Catalán","code":"cat"},{"name":"Chamorro","code":"cha"},{"name":"Chechenio","code":"che"},{"name":"Chichewa, Chewa, Nyanja","code":"nya"},{"name":"Chino","code":"zho"},{"name":"Chuvashia","code":"chv"},{"name":"Cornualles","code":"cor"},{"name":"Corso","code":"cos"},{"name":"Cree","code":"cre"},{"name":"Croacia","code":"hrv"},{"name":"Checo","code":"ces"},{"name":"Danés","code":"dan"},{"name":"Divehi, Dhivehi, Maldivas","code":"div"},{"name":"Holandés","code":"nld"},{"name":"Dzongkha","code":"dzo"},{"name":"Inglés","code":"eng"},{"name":"Esperanto","code":"epo"},{"name":"Estonia","code":"est"},{"name":"Ewe","code":"ewe"},{"name":"Faroese","code":"fao"},{"name":"Fiji","code":"fij"},{"name":"Finlandés","code":"fin"},{"name":"Francés","code":"fra"},{"name":"Fula, Fulah, Pulaar, Pular","code":"ful"},{"name":"Galicia","code":"glg"},{"name":"Georgiano","code":"kat"},{"name":"Alemán","code":"deu"},{"name":"Griego Moderno","code":"ell"},{"name":"Guaraní","code":"grn"},{"name":"Gujarati","code":"guj"},{"name":"Haitiano, creole haitiano","code":"hat"},{"name":"Hausa","code":"hau"},{"name":"Hebreo (moderno)","code":"heb"},{"name":"Herero","code":"her"},{"name":"Hindi","code":"hin"},{"name":"Hiri Motu","code":"hmo"},{"name":"Húngaro","code":"hun"},{"name":"Interlingua","code":"ina"},{"name":"Indonesio","code":"ind"},{"name":"Interlingue","code":"ile"},{"name":"Irlanda","code":"gle"},{"name":"Igbo","code":"ibo"},{"name":"Inupiaq","code":"ipk"},{"name":"Ido","code":"ido"},{"name":"Islandés","code":"isl"},{"name":"Italiano","code":"ita"},{"name":"Inuktitut","code":"iku"},{"name":"Japonés","code":"jpn"},{"name":"Javanés","code":"jav"},{"name":"Kalaallisut, Groenlandia","code":"kal"},{"name":"Canarés","code":"kan"},{"name":"Kanuri","code":"kau"},{"name":"Cachemira","code":"kas"},{"name":"Kazajstán","code":"kaz"},{"name":"Khmer","code":"khm"},{"name":"Kikuyu, Gikuyu","code":"kik"},{"name":"Kinyarwanda","code":"kin"},{"name":"Kirguises, Kirguistán","code":"kir"},{"name":"Komi","code":"kom"},{"name":"Kongo","code":"kon"},{"name":"Corea","code":"kor"},{"name":"Kurdo","code":"kur"},{"name":"Kwanyama, Kuanyama","code":"kua"},{"name":"Latin","code":"lat"},{"name":"Luxemburgués, Luxemburgués","code":"ltz"},{"name":"Luganda","code":"lug"},{"name":"Limburgués, Limburgan, Limburger","code":"lim"},{"name":"Lingala","code":"lin"},{"name":"Lao","code":"lao"},{"name":"Lituano","code":"lit"},{"name":"Luba-Katanga","code":"lub"},{"name":"Letonia","code":"lav"},{"name":"Manx","code":"glv"},{"name":"Macedonia","code":"mkd"},{"name":"Madagascar","code":"mlg"},{"name":"Malayo","code":"msa"},{"name":"Malayalam","code":"mal"},{"name":"Maltés","code":"mlt"},{"name":"Māori","code":"mri"},{"name":"Maratí (Marathi)","code":"mar"},{"name":"De las Islas Marshall","code":"mah"},{"name":"Mongolia","code":"mon"},{"name":"Nauru","code":"nau"},{"name":"Navajo, Navaho","code":"nav"},{"name":"Noruego Bokmål","code":"nob"},{"name":"Ndebele del Norte","code":"nde"},{"name":"Nepali","code":"nep"},{"name":"Ndonga","code":"ndo"},{"name":"Noruego Nynorsk","code":"nno"},{"name":"Noruego","code":"nor"},{"name":"Nuosu","code":"iii"},{"name":"Ndebele del sur","code":"nbl"},{"name":"Occitano","code":"oci"},{"name":"Ojibwe, Ojibwa","code":"oji"},{"name":"Antiguo eslavo eclesiástico, Iglesia eslava, eslavo eclesiástico, antiguo Búlgaro, Esclavo viejo","code":"chu"},{"name":"Oromo","code":"orm"},{"name":"Oriya","code":"ori"},{"name":"Osetia del Sur, osetio","code":"oss"},{"name":"Panjabi, Punjabi","code":"pan"},{"name":"Pāli","code":"pli"},{"name":"Persa","code":"fas"},{"name":"Polaco","code":"pol"},{"name":"Pashto, Pushto","code":"pus"},{"name":"Portugués","code":"por"},{"name":"Quechua","code":"que"},{"name":"Romanche","code":"roh"},{"name":"Kirundi","code":"run"},{"name":"Rumania, Moldavia, Moldavan","code":"ron"},{"name":"Ruso","code":"rus"},{"name":"Sánscrito (samskrta)","code":"san"},{"name":"Sardo","code":"srd"},{"name":"Sindhi","code":"snd"},{"name":"Sami del norte","code":"sme"},{"name":"Samoa","code":"smo"},{"name":"Sango","code":"sag"},{"name":"Serbio","code":"srp"},{"name":"Gaélico escocés, gaélico","code":"gla"},{"name":"Shona","code":"sna"},{"name":"Cingalés, singalés","code":"sin"},{"name":"Eslovaca","code":"slk"},{"name":"Esloveno","code":"slv"},{"name":"Somalí","code":"som"},{"name":"Southern Sotho","code":"sot"},{"name":"Español, castellano","code":"spa"},{"name":"Sundanese","code":"sun"},{"name":"Swahili","code":"swa"},{"name":"Swati","code":"ssw"},{"name":"Sueco","code":"swe"},{"name":"Tamil","code":"tam"},{"name":"Telugu","code":"tel"},{"name":"Tayikistán","code":"tgk"},{"name":"Tailandia","code":"tha"},{"name":"Tigrinya","code":"tir"},{"name":"Tibetano estándar, Tibetano, Central","code":"bod"},{"name":"Turkmenistán","code":"tuk"},{"name":"Tagalo","code":"tgl"},{"name":"Tswana","code":"tsn"},{"name":"Tonga (Islas Tonga)","code":"ton"},{"name":"Turco","code":"tur"},{"name":"Tsonga","code":"tso"},{"name":"Tártara","code":"tat"},{"name":"Twi","code":"twi"},{"name":"Tahitian","code":"tah"},{"name":"Uighur, Uyghur","code":"uig"},{"name":"Ucrania","code":"ukr"},{"name":"Urdu","code":"urd"},{"name":"Uzbeko","code":"uzb"},{"name":"Venda","code":"ven"},{"name":"Vietnamita","code":"vie"},{"name":"Volapük","code":"vol"},{"name":"Valonia","code":"wln"},{"name":"Galés","code":"cym"},{"name":"Wolof","code":"wol"},{"name":"Oeste de Frisia","code":"fry"},{"name":"Xhosa","code":"xho"},{"name":"Yiddish","code":"yid"},{"name":"Yoruba","code":"yor"},{"name":"Zhuang, Chuang","code":"zha"},{"name":"Zulu","code":"zul"}] %}
        {% set lang = h.get_theme_config('portal-metadata.language') %}
        <select class="form-control" id="portal-language" name="metadata-language" style="margin-bottom: 30px;">
            {% for language in languages %}
                <option value="{{ language.code }}" {{ 'selected' if language.code == lang }}>{{ language.name }}</option>
            {% endfor %}
        </select>

        <h2>Licencia (recomendado)</h2>
        {% set licenses = [
            {"name":"No se especificó la licencia","code":"notspecified"},
            {"name": "Open Data Commons Public Domain Dedication and Licence (PDDL)", "code": "odc-pddl"},
            {"name": "Open Data Commons Open Database License (ODbL)", "code": "odc-odbl"},
            {"name": "Open Data Commons Attribution License", "code": "odc-by"},
            {"name": "Creative Commons CCZero", "code": "cc-zero"},
            {"name": "Creative Commons Attribution", "code": "cc-by"},
            {"name": "Creative Commons Attribution Share-Alike", "code": "cc-by-sa"},
            {"name": "GNU Free Documentation License", "code": "gfdl"},
            {"name": "Otra (Abierta)", "code": "other-open"},
            {"name": "Otra (Public Domain)", "code": "other-pd"},
            {"name": "Otra (Atribución)", "code": "other-at"},
            {"name": "UK Open Government Licence (OGL)", "code": "uk-ogl"},
            {"name": "Creative Commons Non-Commercial (Cualquiera)", "code": "cc-nc"},
            {"name": "Otra (No comercial)", "code": "other-nc"},
            {"name": "Otra (No abierta)", "code": "other-closed"},
        ] %}
        {% set lic = h.get_theme_config('portal-metadata.license') %}
        <select class="form-control" id="portal-license" name="metadata-license" style="margin-bottom: 30px;">
            {% for license in licenses %}
                <option value="{{ license.code }}" {{ 'selected' if license.code == lic }}>{{ license.name }}</option>
            {% endfor %}
        </select>

        <h2>Otras condiciones de la licencia (opcional)</h2>
        {% set licence_conditions = h.get_theme_config('portal-metadata.licence_conditions') %}
        <input name="metadata-licence_conditions" type="text" title="Condiciones Licencia"
               placeholder="Ingresá las condiciones aquí" value="{{ licence_conditions if licence_conditions else '' }}">

        <h2>Cobertura geográfica (opcional)</h2>
        <p>Ingresá cuál es el alcance geográfico del portal.</p>

        <h4 style="margin-left: 10px;">País</h4>
        {% set countries = [{"name":"1","code":"1"},{"name": "2", "code": "2"},{"name": "3", "code": "3"},{"name": "Argentina", "code": "Arg"}] %}
        {% set ctry = h.get_theme_config('portal-metadata.country') %}
        <select class="form-control" id="portal-country" name="metadata-country" style="margin-bottom: 30px;">
            {% for country in countries %}
                <option value="{{ country.code }}" {{ 'selected' if country.code == ctry }}>{{ country.name }}</option>
            {% endfor %}
        </select>

        <h4 class="from-country" style="margin-left: 10px;">Provincia</h4>
        {% set provinces = h.get_json_provinces() %}
        {% set prov = h.get_theme_config('portal-metadata.province') %}
        {% set all_municipios = h.get_json_municipios() %}
        {% set jinja_municipios_x_province = {} %}
        {% set municipios_x_province = h.municipios_with_province() %}
        {% for m_x_p in municipios_x_province %}
            {% set x=jinja_municipios_x_province.__setitem__(m_x_p.municipio, m_x_p.province) %}
        {% endfor %}
        <select onchange="change_province()" class="form-control from-country" id="portal-province" name="metadata-province" style="margin-bottom: 30px;">
            {% for province in provinces %}
                <option value="{{ province.id }}" {{ 'selected' if province.id == prov }}>{{ province.nombre }}</option>
            {% endfor %}
        </select>

        <h4 class="from-country" style="margin-left: 10px;">Municipio</h4>
        {% set munic = h.get_theme_config('portal-metadata.municipio') or [] %}
            <select class="form-control from-country" id="portal-municipio" name="metadata-municipio"
                    multiple="multiple" style="width: 100%; height: 400px; margin-bottom: 50px;">
                {% for municipio in all_municipios %}
                    <option class="from-country municipio-option" data-province={{ municipio.provincia.id }} value="{{ municipio.id }}" {{ 'selected' if municipio.id in munic }}>{{ municipio.nombre }}</option>
                {% endfor %}
            </select>
        {% set last_updated = h.get_theme_config('portal-metadata.last_updated') %}

        <h2>Versión del portal: {{ h.portal_andino_version() }} - Última modificación: {{ last_updated }}</h2>

        <div class="submit-container">
            <button id="submit-metadata-portal" class="submit-button" type="submit" name="save">GUARDAR</button>
        </div>
    </form>

    {% resource 'gobar_js/config/metadata_actions.js' %}

{% endblock -%}