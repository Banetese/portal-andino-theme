{% extends "config/config_base.html" %}

{% block config %}
    <h1>Acerca (opcional)</h1>
    <label>Desde aquí podés seleccionar qué tipo de información querés contar de tu portal. <br>
    Podés elegir entre brindar una información básica, secciones personalizadas, o elegir no tener esta sección.</label>

    <form method="post" action="" data-module="basic-form">
        <h2>Seleccioná una opción</h2>
        <select>
            <option>No quiero una sección de acerca</option>
            <option>Quiero una sección de acerca que dé información básica</option>
            <option selected>Quiero secciones personalizadas (avanzado)</option>
        </select>


        <div class="basic-about">
            <div class="explanation">
                <h2>Información básica</h2>
                <label>Contá qué son los datasets de tu portal. Aprovechá y explicá qué son los datos
                    abiertos, e invitá a tus usuarios a que los usen, los modifiquen y los compartan.</label>
            </div>

            <h2>Título</h2>
            {% set title = h.get_theme_config('about.title') %}
            <input name="about-title" type="text" title="Título" value="{{ title if title else '' }}">

            <h2>Descripción</h2>
            {% set description = h.get_theme_config('about.description') %}
            <textarea title="Descripción del acerca" name="about-description"
            >{{- description if description else '' -}}</textarea>
            <label class="explanation description">En este campo podés usar <a>formato Markdown</a>.</label>
        </div>


        <div class="advanced-about">
            <div class="explanation">
                <h2>Secciones personalizadas</h2>
                <label>Para agregar una nueva sección, podés crear archivos .html en la carpeta
                    "custom". Te sugerimos guiarte viendo el archivo "seccion-acerca.html". Lo único que tenés que completar
                    aquí es el nombre de ese archivo y qué título llevará la sección.
                </label>
            </div>


            <!--
            '[{ "title": "x1", "fileName": "y1" }, { "title": "x2", "fileName": "y2" }]'
             -->
            {% set sections = h.json_loads('[{ "title": "x1", "fileName": "y1" }, { "title": "x2", "fileName": "y2" }]') %}
            {% set sections = h.get_theme_config('about.sections', []) %}
            <div class="sections-container">
                {% if sections|length > 1 %}
                    {% for section in sections %}
                        <!-- div -->
                        <button type="button" class="close" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <h2 class="section">Sección</h2>
                        <hr class="section">

                        <h2>Título</h2>
                        <input name="about-section-title" type="text" title="Título" value="{{ section.title }}">

                        <h2>Nombre del archivo</h2>
                        <input name="about-section-filename" type="text" title="Nombre del archivo" value="{{ section.fileName }}">
                        <!-- /div -->
                    {% endfor %}
                {% else %}
                    <!-- div -->
                    <button type="button" class="close" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h2 class="section">Sección</h2>
                    <hr class="section">

                    <h2>Título</h2>
                    <input name="about-section-title" type="text" title="Título" value="">

                    <h2>Nombre del archivo</h2>
                    <input name="about-section-filename" type="text" title="Nombre del archivo" value="">
                    <!-- /div -->
                {% endif %}

                <input type="hidden" id="about-sections" value="" />
            </div>
        </div>


        <div class="submit-container">
            <button class="submit-button" type="submit" name="save">GUARDAR CAMBIOS</button>
        </div>
    </form>

{% resource 'gobar_js/config/about_actions.js' %}

{% endblock %}
