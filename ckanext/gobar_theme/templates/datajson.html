{
    "version": "{{ datajson.version }}",
    "identifier": "{{ datajson.identifier }}",
    "title": "{{ datajson.title }}",
    "description": "{{ datajson.description }}",
    "superThemeTaxonomy": "{{ datajson.superThemeTaxonomy }}",
    "publisher":{
                    "mbox": "{{ datajson.publisher.mbox }}",
                    "name": "{{ datajson.publisher.name }}"
                },
    "issued": "{{ datajson.issued }}",
    "modified": "{{ datajson.modified }}",
    "language": [ "{{ datajson.language[0] }}" ],
    "license": "{{ datajson.license }}",
    "homepage": "{{ datajson.homepage }}",
    "rights": "{{ datajson.rights }}",
    "spatial": [ "{{ datajson.spatial[0] or None }}"
                    {% if datajson.spatial[1] is defined %}
                        ,"{{ datajson.spatial[1] }}"
                        {% if datajson.spatial[2] is defined %}
                            ,"{{ datajson.spatial[2] }}"
                        {% endif %}
                    {% endif %} ],
    "themeTaxonomy": [ {% for theme in datajson.themeTaxonomy %}
                            {
                                "label": "{{ theme.label }}",
                                "id": "{{ theme.id }}",
                                "description": "{{ theme.description }}"
                            } {% if loop.index < datajson.themeTaxonomy|length %},{% endif %}
                        {% endfor %} ],
    "dataset": [ {% for dataset in datajson.dataset %}
                    {
                        "title":          "{{ dataset.title }}",
                        "description":    "{{ dataset.description }}",
                        "modified":       "{{ dataset.modified }}",
                        "identifier":     "{{ dataset.identifier }}",
                        "issued":         "{{ dataset.issued }}",
                        "landingPage":    "{{ dataset.landingPage }}",
                        "license":        "{{ dataset.license }}",
                        "spatial":      [ "{{ dataset.spatial[0] }}"
                                          {% if dataset.spatial[1] is defined %}
                                              ,"{{ dataset.spatial[1] }}"
                                              {% if dataset.spatial[2] is defined %}
                                                  ,"{{ dataset.spatial[2] }}"
                                              {% endif %}
                                          {% endif %} ],
                        "publisher":    { "mbox": "{{ dataset.publisher.mbox }}",
                                          "name": "{{ dataset.publisher.name }}" },
                        {% if dataset.source is defined %}
                            "source":     "{{ dataset.source }}",
                        {% endif %}
                        "contactPoint": {
                                            {% if dataset.contactPoint.fn != '' %}
                                                "fn": "{{ dataset.contactPoint.fn }}"
                                                {% if dataset.contactPoint.hasEmail != '' %}
                                                    ,
                                                {% endif %}
                                            {% endif %}
                                            {% if dataset.contactPoint.hasEmail != '' %}
                                                "hasEmail": "{{ dataset.contactPoint.hasEmail }}"
                                            {% endif %}
                                        },
                        "distribution":
                            [
                                {% for distrib in dataset.distribution %}
                                    {
                                        "identifier":  "{{ distrib.identifier }}",
                                        {% if distrib.format is defined %}
                                            "format":      "{{ distrib.format }}",
                                        {% endif %}
                                        "title":       "{{ distrib.title }}",
                                        "description": "{{ distrib.description }}",
                                        {% if distrib.fileName is defined %}
                                            "fileName": "{{ distrib.fileName }}",
                                        {% endif %}
                                        {% if distrib.type is defined %}
                                            "type":        "{{ distrib.type }}",
                                        {% endif %}
                                        {% if distrib.issued is defined %}
                                            "issued":      "{{ distrib.issued }}",
                                        {% endif %}
                                        {% if distrib.modified is defined %}
                                            "modified":    "{{ distrib.modified }}",
                                        {% endif %}
                                        {% if distrib.license is defined %}
                                            "license":     "{{ distrib.license }}",
                                        {% endif %}
                                        {% if distrib.attributes|length > 0 %}
                                            "field":
                                                [
                                                    {% for column in distrib.attributes %}
                                                        {
                                                            {% for field in column %}
                                                                "{{ field }}": "{{ column[field] }}"
                                                                {% if loop.index < column|length %}
                                                                    ,
                                                                {% endif %}
                                                            {% endfor %}
                                                        }
                                                        {% if loop.index < distrib.attributes|length %}
                                                            ,
                                                        {% endif %}
                                                    {% endfor %}
                                                ],
                                        {% endif %}
                                        "accessURL": "{{ distrib.accessURL }}",
                                        "downloadURL": "{{ distrib.downloadURL }}"
                                    } {% if loop.index < dataset.distribution|length %},{% endif %}
                                {% endfor %}
                            ],
                        {% if dataset.keyword|length > 0 %}
                            "keyword":
                                [
                                    {% for keyword in dataset.keyword %}
                                        "{{ keyword.display_name }}"
                                        {% if loop.index < dataset.keyword|length %}
                                            ,
                                        {% endif %}
                                    {% endfor %}
                                ],
                        {% endif %}
                        "superTheme":
                            [
                                {% for theme in dataset.superTheme %}
                                    "{{ theme }}"
                                    {% if loop.index < dataset.superTheme|length %}
                                        ,
                                    {% endif %}
                                {% endfor %}
                            ],
                        {% if dataset.language|length > 0 %}
                            "language":
                                [
                                    {% for language in dataset.language %}
                                        "{{ language }}"
                                        {% if loop.index < dataset.language|length %}
                                            ,
                                        {% endif %}
                                    {% endfor %}
                                ],
                        {% endif %}
                        {% if dataset.theme|length > 0 %}
                            "theme":
                                [
                                    {% for theme in dataset.theme %}
                                        "{{ theme.name }}"
                                        {% if loop.index < dataset.theme|length %}
                                            ,
                                        {% endif %}
                                    {% endfor %}
                                ],
                        {% endif %}
                        {% if dataset.accrualPeriodicity is defined %}
                            "accrualPeriodicity": "{{ dataset.accrualPeriodicity }}"
                        {% endif %}
                        {% if dataset.temporal is defined %}
                            ,"temporal": "{{ dataset.temporal }}"
                        {% endif %}
                    } {% if loop.index < datajson.dataset|length %},{% endif %}
                {% endfor %} ]
}